<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PriorizaÃ§Ã£o de Despesas DinÃ¢mico</title>
  <style>
body {
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 10px;
  background-color: #121212;
  color: #e0e0e0;
}

.container {
  max-width: 600px;
  margin: auto;
  background: #1e1e1e;
  padding: 15px;
  border-radius: 8px;
  box-shadow: 0 0 10px rgba(0,0,0,0.6);
}

h2, h3 {
  text-align: center;
  color: #ffffff;
  font-size: 1.4em;
}

.instruction {
  background-color: #2c2c2c;
  border-left: 5px solid #4caf50;
  padding: 10px;
  margin-bottom: 20px;
  font-size: 0.95em;
  color: #ccc;
}

.form-group {
  margin-bottom: 15px;
}

label {
  display: block;
  margin-bottom: 5px;
  font-weight: bold;
  font-size: 0.95em;
  color: #ddd;
}

input, select {
  width: 100%;
  padding: 10px;
  font-size: 1em;
  border: 1px solid #444;
  border-radius: 4px;
  box-sizing: border-box;
  background-color: #2a2a2a;
  color: #e0e0e0;
}

input[type="range"] {
  margin-top: 5px;
}

.scale-labels {
  display: flex;
  justify-content: space-between;
  font-size: 0.85em;
  color: #aaa;
}

button {
  background-color: #4CAF50;
  color: white;
  padding: 12px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  width: 100%;
  font-size: 1em;
  margin-top: 10px;
}

button:hover {
  background-color: #45a049;
}

#resumo-section {
  margin-top: 30px;
  border-top: 2px solid #333;
  padding-top: 20px;
}

#resumo-tabela {
  width: 100%;
  border-collapse: collapse;
  margin-top: 15px;
  overflow-x: auto;
  display: block;
}

#resumo-tabela th, #resumo-tabela td {
  border: 1px solid #444;
  padding: 8px;
  text-align: left;
  font-size: 0.9em;
  background-color: #1a1a1a;
  color: #e0e0e0;
}

#resumo-tabela th {
  background-color: #333;
}

.copy-button {
  background-color: #007bff;
  margin-bottom: 15px;
}

.copy-button:hover {
  background-color: #0056b3;
}
  </style>
</head>
<body>
<div class="container">
  <h2>PriorizaÃ§Ã£o de Despesas: AnÃ¡lise Familiar Colaborativa</h2>
  <div class="instruction">
    <strong>INSTRUÃ‡ÃƒO:</strong> ApÃ³s preencher, clique em "Adicionar Despesa Ã  Tabela". Repita o processo para todas as despesas. Ao final, copie a tabela abaixo para o Excel.
  </div>
  <form id="despesa-form">
    <div class="form-group">
      <label for="nome">1. Nome do Membro da FamÃ­lia:</label>
      <input type="text" id="nome" name="nome" required placeholder="Digite seu nome">
    </div>
Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  <label for="despesa">2. Despesa:</label>
Â  Â  Â  Â  <select id="despesa" name="despesa" required>
Â  Â  Â  Â  Â  <option value="" disabled selected>Selecione uma despesa</option>
	
Â  Â  Â  Â  Â  <optgroup label="ðŸ  Moradia">
Â  Â  Â  Â  Â  Â  <option value="CondomÃ­nio">CondomÃ­nio</option>
Â  Â  Â  Â  Â  Â  <option value="Celular / Internet (Claro)">Celular / Internet (Claro)</option>
Â  Â  Â  Â  Â  Â  <option value="Conta de luz">Conta de luz</option>
Â  Â  Â  Â  Â  Â  <option value="GÃ¡s">GÃ¡s</option>
Â  Â  Â  Â  Â  Â  <option value="TV">TV</option>
Â  Â  Â  Â  Â  Â  <option value="Seguro do apartamento">Seguro do apartamento</option>
Â  Â  Â  Â  Â  Â  <option value="ManutenÃ§Ã£o ou reparos casa">ManutenÃ§Ã£o ou reparos casa</option>
Â  Â  Â  Â  Â  Â  <option value="Outros para casa">Outros para casa</option>
Â  Â  Â  Â  Â  </optgroup>

Â  Â  Â  Â  Â  <optgroup label="ðŸš— Transporte">
Â  Â  Â  Â  Â  Â  <option value="Lavagem">Lavagem</option>
Â  Â  Â  Â  Â  Â  <option value="CombustÃ­vel">CombustÃ­vel</option>
Â  Â  Â  Â  Â  Â  <option value="Estacionamento / pedÃ¡gios">Estacionamento / pedÃ¡gios</option>
Â  Â  Â  Â  Â  </optgroup>

Â  Â  Â  Â  Â  <optgroup label="ðŸ½ï¸ Comida">
Â  Â  Â  Â  Â  Â  <option value="Supermercado">Supermercado</option>
Â  Â  Â  Â  Â  Â  <option value="Padaria">Padaria</option>
Â  Â  Â  Â  Â  Â  <option value="Comer fora / Ifood">Comer fora / Ifood</option>
Â  Â  Â  Â  Â  Â  <option value="Outros comida">Outros comida</option>
Â  Â  Â  Â  Â  </optgroup>

Â  Â  Â  Â  Â  <optgroup label="ðŸ‘© Christiane">
Â  Â  Â  Â  Â  Â  <option value="Curso PsicanÃ¡lise">Curso PsicanÃ¡lise</option>
Â  Â  Â  Â  Â  Â  <option value="Compras Chris">Compras Chris</option>
Â  Â  Â  Â  Â  Â  <option value="MÃ©dico Chris">MÃ©dico Chris</option>
Â  Â  Â  Â  Â  Â  <option value="Cabelo/unhas Chris">Cabelo/unhas Chris</option>
Â  Â  Â  Â  Â  Â  <option value="VestuÃ¡rio Chris">VestuÃ¡rio Chris</option>
Â  Â  Â  Â  Â  Â  <option value="Academia Chris">Academia Chris</option>
Â  Â  Â  Â  Â  Â  <option value="Outros Chris">Outros Chris</option>
Â  Â  Â  Â  Â  </optgroup>

Â  Â  Â  Â  Â  <optgroup label="ðŸ‘¨ Jeferson">
Â  Â  Â  Â  Â  Â  <option value="Compras Jeff">Compras Jeff</option>
Â  Â  Â  Â  Â  Â  <option value="Academia Jeff">Academia Jeff</option>
Â  Â  Â  Â  Â  Â  <option value="Outros Jeff">Outros Jeff</option>
Â  Â  Â  Â  Â  </optgroup>

Â  Â  Â  Â  Â  <optgroup label="ðŸ‘§ LetÃ­cia">
Â  Â  Â  Â  Â  Â  <option value="Escola LetÃ­cia">Escola LetÃ­cia</option>
Â  Â  Â  Â  Â  Â  <option value="Cursos extras">Cursos extras</option>
Â  Â  Â  Â  Â  Â  <option value="Compras LetÃ­cia">Compras LetÃ­cia</option>
Â  Â  Â  Â  Â  Â  <option value="Cabelo/unhas LetÃ­cia">Cabelo/unhas LetÃ­cia</option>
Â  Â  Â  Â  Â  Â  <option value="VestuÃ¡rio LetÃ­cia">VestuÃ¡rio LetÃ­cia</option>
Â  Â  Â  Â  Â  Â  <option value="Dentista LetÃ­cia">Dentista LetÃ­cia</option>
Â  Â  Â  Â  Â  Â  <option value="RemÃ©dios LetÃ­cia">RemÃ©dios LetÃ­cia</option>
Â  Â  Â  Â  Â  </optgroup>

Â  Â  Â  Â  Â  <optgroup label="ðŸ¾ Animais de estimaÃ§Ã£o">
Â  Â  Â  Â  Â  Â  <option value="Comida Pets">Comida Pets</option>
Â  Â  Â  Â  Â  Â  <option value="Banho e tosa">Banho e tosa</option>
Â  Â  Â  Â  Â  </optgroup>

Â  Â  Â  Â  Â  <optgroup label="ðŸ“º Assinaturas">
Â  Â  Â  Â  Â  Â  <option value="Celulares">Celulares</option>
Â  Â  Â  Â  Â  Â  <option value="Netflix">Netflix</option>
Â  Â  Â  Â  Â  Â  <option value="Rappi">Rappi</option>
Â  Â  Â  Â  Â  Â  <option value="Apple">Apple</option>
Â  Â  Â  Â  Â  Â  <option value="Wine">Wine</option>
Â  Â  Â  Â  Â  Â  <option value="Outras assinaturas">Outras assinaturas</option>
Â  Â  Â  Â  Â  </optgroup>

Â  Â  Â  Â  Â  <optgroup label="ðŸ§¹ ServiÃ§os">
Â  Â  Â  Â  Â  Â  <option value="Seguro patrimonial">Seguro patrimonial</option>
Â  Â  Â  Â  Â  </optgroup>

Â  Â  Â  Â  Â  <optgroup label="ðŸŽ‰ Entretenimento">
Â  Â  Â  Â  Â  Â  <option value="Bares e Restaurantes">Bares e Restaurantes</option>
Â  Â  Â  Â  Â  Â  <option value="Jantar / almoÃ§o com amigos">Jantar / almoÃ§o com amigos</option>
Â  Â  Â  Â  Â  Â  <option value="Passeios em famÃ­lia">Passeios em famÃ­lia</option>
Â  Â  Â  Â  Â  Â  <option value="Viagens">Viagens</option>
Â  Â  Â  Â  Â  </optgroup>

Â  Â  Â  Â  Â  <optgroup label="ðŸ’³ EmprÃ©stimos">
Â  Â  Â  Â  Â  Â  <option value="CrÃ©dito imobiliÃ¡rio">CrÃ©dito imobiliÃ¡rio</option>
Â  Â  Â  Â  Â  Â  <option value="Consignado">Consignado</option>
Â  Â  Â  Â  Â  </optgroup>

Â  Â  Â  Â  Â  <optgroup label="ðŸ§¾ Impostos">
Â  Â  Â  Â  Â  Â  <option value="IPTU">IPTU</option>
Â  Â  Â  Â  Â  Â  <option value="IOF">IOF</option>
Â  Â  Â  Â  Â  </optgroup>

Â  Â  Â  Â  Â  <optgroup label="ðŸŽ Presentes e doaÃ§Ãµes">
Â  Â  Â  Â  Â  Â  <option value="AniversÃ¡rios">AniversÃ¡rios</option>
Â  Â  Â  Â  Â  Â  <option value="ComemoraÃ§Ãµes">ComemoraÃ§Ãµes</option>
Â  Â  Â  Â  Â  </optgroup>

Â  Â  Â  Â  </select>
Â  Â  Â  </div>
    <div class="form-group">
      <label for="prioridade">3. ClassificaÃ§Ã£o de Prioridade:</label>
      <input type="range" id="prioridade" name="prioridade" min="0" max="10" value="10" oninput="document.getElementById('prioridade_valor').innerText = this.value">
      <div class="scale-labels">
        <span>0 (Corte Imediato)</span>
        <span id="prioridade_valor">10</span>
        <span>10 (Essencial)</span>
      </div>
    </div>

    <div class="form-group">
      <label for="valor_justo">4. Valor atual, ou que acha justo (R$):</label>
      <input type="text" id="valor_justo" name="valor_justo" placeholder="Preenchido automaticamente">
    </div>

    <button type="submit">Adicionar Despesa Ã  Tabela</button>
  </form>

  <div id="resumo-section">
    <h3>Resumo das ClassificaÃ§Ãµes</h3>
    <button class="copy-button" onclick="copyTable()" id="copy-btn">Copiar Tabela para Excel/Planilha</button>
    <table id="resumo-tabela">
      <thead>
        <tr>
          <th>Nome</th>
          <th>Despesa</th>
          <th>Prioridade</th>
          <th>Valor Justo (R$)</th>
        </tr>
      </thead>
      <tbody id="tabela-corpo"></tbody>
    </table>
  </div>
</div>

<script>
const despesasPorCategoria = {
  "ðŸ  Moradia": {
    "CondomÃ­nio": 1512.94, "Celular / Internet (Claro)": 391.71, "Conta de luz": 350.00, "GÃ¡s": 250.00, "TV": 0.00,
    "Seguro do apartamento": 38.32, "ManutenÃ§Ã£o ou reparos casa": 0.00, "Outros para casa": 0.00
  },
  "ðŸš— Transporte": {
    "Lavagem": 140.00, "CombustÃ­vel": 25.00, "Estacionamento / pedÃ¡gios": 30.00
  },
  "ðŸ½ï¸ Comida": {
    "Supermercado": 900.00, "Padaria": 60.00, "Comer fora / Ifood": 880.00, "Outros comida": 400.00
  },
  "ðŸ‘© Christiane": {
    "Curso PsicanÃ¡lise": 831.00, "Compras Chris": 250.00, "MÃ©dico Chris": 200.00, "Cabelo/unhas Chris": 200.00,
    "VestuÃ¡rio Chris": 200.00, "Academia Chris": 139.00, "Outros Chris": 100.00
  },
  "ðŸ‘¨ Jeferson": {
    "Compras Jeff": 44.00, "Academia Jeff": 45.00, "Outros Jeff": 130.00
  },
  "ðŸ‘§ LetÃ­cia": {
    "Escola LetÃ­cia": 2388.92, "Cursos extras": 332.00, "Compras LetÃ­cia": 200.00, "Cabelo/unhas LetÃ­cia": 60.00,
    "VestuÃ¡rio LetÃ­cia": 150.00, "Dentista LetÃ­cia": 57.00, "RemÃ©dios LetÃ­cia": 110.00
  },
  "ðŸ¾ Animais de estimaÃ§Ã£o": {
    "Comida Pets": 150.00, "Banho e tosa": 20.00
  },
  "ðŸ“º Assinaturas": {
    "Celulares": 600.00, "Netflix": 75.90, "Rappi": 39.90, "Apple": 50.00, "Wine": 56.00, "Outras assinaturas": 49.00
  },
  "ðŸ§¹ ServiÃ§os": {
    "Seguro patrimonial": 140.90
  },
  "ðŸŽ‰ Entretenimento": {
    "Bares e Restaurantes": 300.00, "Jantar / almoÃ§o com amigos": 200.00, "Passeios em famÃ­lia": 100.00, "Viagens": 100.00
  },
  "ðŸ’³ EmprÃ©stimos": {
    "CrÃ©dito imobiliÃ¡rio": 3235.00, "Consignado": 1898.11
  },
  "ðŸ§¾ Impostos": {
    "IPTU": 404.47, "IOF": 280.00
  },
  "ðŸŽ Presentes e doaÃ§Ãµes": {
    "AniversÃ¡rios": 200.00, "ComemoraÃ§Ãµes": 100.00
  }
};

window.addEventListener('DOMContentLoaded', () => {
  const selectDespesa = document.getElementById('despesa');
  const valorJustoInput = document.getElementById('valor_justo');
  const form = document.getElementById('despesa-form');
  const tabelaCorpo = document.getElementById('tabela-corpo');
  const prioridadeValor = document.getElementById('prioridade_valor');

  // --- Ãndice plano: despesa -> valor ---
  const despesasPlano = {};
  for (const categoria in despesasPorCategoria) {
    for (const despesa in despesasPorCategoria[categoria]) {
      despesasPlano[despesa] = despesasPorCategoria[categoria][despesa];
    }
  }

  // --- Preenche o select com optgroups ---
  const placeholder = Array.from(selectDespesa.querySelectorAll('option')).find(o => !o.value) || null;
  selectDespesa.innerHTML = '';
  if (placeholder) selectDespesa.appendChild(placeholder);

  for (const categoria in despesasPorCategoria) {
    const optgroup = document.createElement('optgroup');
    optgroup.label = categoria;
    for (const despesa in despesasPorCategoria[categoria]) {
      const option = document.createElement('option');
      option.value = despesa;
      option.text = despesa; // Safari precisa do .text tambÃ©m
      optgroup.appendChild(option);
    }
    selectDespesa.appendChild(optgroup);
  }

  // --- Atualiza valor sugerido ---
  function atualizarValorSugerido() {
    const key = selectDespesa.value;
    if (!key) {
      valorJustoInput.value = '';
      return;
    }
    const valor = despesasPlano[key];
    valorJustoInput.value = valor !== undefined ? valor.toFixed(2).replace('.', ',') : '';
  }

  selectDespesa.addEventListener('change', atualizarValorSugerido);
  selectDespesa.addEventListener('input', atualizarValorSugerido);
  selectDespesa.addEventListener('blur', atualizarValorSugerido);
  setTimeout(atualizarValorSugerido, 50);

  // --- Submit do formulÃ¡rio ---
  form.addEventListener('submit', (event) => {
    event.preventDefault();

    const nome = form.nome.value.trim();
    const despesa = form.despesa.value;
    const prioridade = form.prioridade.value;
    const valorJusto = form.valor_justo.value;

    if (!nome || !despesa) return;

    const novaLinha = tabelaCorpo.insertRow();
    novaLinha.insertCell().outerHTML = `<td contenteditable="true">${nome}</td>`;
    novaLinha.insertCell().outerHTML = `<td contenteditable="true">${despesa}</td>`;
    novaLinha.insertCell().outerHTML = `<td contenteditable="true">${prioridade}</td>`;
    novaLinha.insertCell().outerHTML = `<td contenteditable="true">${valorJusto}</td>`;

    const optionToRemove = selectDespesa.querySelector(`option[value="${despesa.replace(/(["\\])/g, '\\$1')}"]`);
    if (optionToRemove) {
      const nextOption = optionToRemove.nextElementSibling && optionToRemove.nextElementSibling.tagName === 'OPTION'
        ? optionToRemove.nextElementSibling
        : Array.from(selectDespesa.querySelectorAll('option')).find(o => o.value && o !== optionToRemove);

      optionToRemove.remove();

      setTimeout(() => {
        if (nextOption) {
          selectDespesa.value = nextOption.value;
          selectDespesa.dispatchEvent(new Event('change', { bubbles: true }));
          atualizarValorSugerido();
        } else {
          selectDespesa.selectedIndex = 0;
          valorJustoInput.value = '';
        }
      }, 0);
    }

    form.reset();
    form.nome.value = nome;
    if (prioridadeValor) prioridadeValor.innerText = '10';
    form.despesa.focus();
  });

  // --- Copiar tabela ---
  window.copyTable = function() {
    const table = document.getElementById('resumo-tabela');
    let csv = '';
    const headers = Array.from(table.querySelectorAll('th')).map(th => th.innerText);
    csv += headers.join('\t') + '\n';
    table.querySelectorAll('tbody tr').forEach(row => {
      const rowData = Array.from(row.querySelectorAll('td')).map(td => td.innerText);
      if (rowData.length > 0) csv += rowData.join('\t') + '\n';
    });
    navigator.clipboard.writeText(csv).then(() => {
      const btn = document.getElementById('copy-btn');
      const originalText = btn.textContent;
      btn.textContent = 'Copiado!';
      setTimeout(() => btn.textContent = originalText, 2000);
      document.getElementById('nome').value = '';
    }).catch(err => {
      alert('NÃ£o foi possÃ­vel copiar. Selecione e copie manualmente.');
      console.error(err);
    });
  };
});
</script>
</body>
</html>